{% extends 'base.html' %}
{% block title %}B·∫£ng x·∫øp h·∫°ng | Link Space{% endblock %}
{% block content %}
<div class="container py-4">
    <h2 class="mb-4 text-center">üèÜ B·∫£ng x·∫øp h·∫°ng ng∆∞·ªùi d√πng</h2>
    <div class="table-responsive">
        <table class="table table-striped table-hover align-middle">
            <thead class="table-primary">
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Avatar</th>
                    <th scope="col">T√™n</th>
                    <th scope="col">ƒêi·ªÉm</th>
                    <th scope="col">C·∫•p b·∫≠c</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users[:20] %}
                <tr>
                    <th scope="row">{{ loop.index }}</th>
                    <td>
                        <img src="{{ url_for('static', filename=user.avatar|default('avatars/default.png')) }}" alt="avatar" class="rounded-circle" width="48" height="48" style="object-fit:cover;border:3px solid #667eea;" onerror="this.src='{{ url_for('static', filename='avatars/default.png') }}'">
                    </td>
                    <td>
                        <a href="{{ url_for('profile', username=user.username) }}" class="fw-bold text-decoration-none">@{{ user.nickname|default(user.username) }}</a>
                    </td>
                    <td><span class="fw-bold text-primary">{{ user.points|default(0) }}</span></td>
                    <td>
                        {% set pts = user.points|default(0) %}
                        {% if 'Ch·ªß Nh√¢n' in user.badges %}
                            <span class="badge bg-warning text-dark">üëë Ch·ªß Nh√¢n</span>
                        {% elif 'Th√°ch ƒê·∫•u' in user.badges or pts >= 5000 %}
                            <span class="badge bg-danger">Th√°ch ƒê·∫•u</span>
                        {% elif 'ƒê·∫°i Cao Th·ªß' in user.badges or pts >= 2000 %}
                            <span class="badge bg-purple">ƒê·∫°i Cao Th·ªß</span>
                        {% elif 'Huy·ªÅn tho·∫°i' in user.badges or pts >= 1000 %}
                            <span class="badge bg-info">Huy·ªÅn tho·∫°i</span>
                        {% elif 'Cao th·ªß' in user.badges or pts >= 500 %}
                            <span class="badge bg-primary">Cao th·ªß</span>
                        {% elif 'Ng∆∞·ªùi m·ªõi' in user.badges or pts >= 100 %}
                            <span class="badge bg-secondary">Ng∆∞·ªùi m·ªõi</span>
                        {% else %}
                            <span class="badge bg-light text-dark">Ch∆∞a c√≥ rank</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %} 